import{s as z,a as b,r as A,h as H,d as u,c as P,i as _,j as T,v as y,e as L,b as N,f as I,t as $,k as g,g as J,l as h,m as k}from"../chunks/scheduler.BAVTa1Hq.js";import{S as K,i as Q,c as w,a as D,m as E,t as m,b as d,e as B,d as C,g as S}from"../chunks/index.CW0Vd2qk.js";import{e as v,f as j,r as F}from"../chunks/index.XkPDf8Np.js";import{a as X,b as Y}from"../chunks/cache.D7Gg7sQy.js";import{L as Z}from"../chunks/LoadingBanner.Jek-2faF.js";import{b as x,c as ee}from"../chunks/stores.mjMy36J9.js";import{A as te,a as ne}from"../chunks/AccordionItem.o1p-JkpD.js";import{B as re}from"../chunks/Badge.DXjAT9np.js";function M(s,e,l){const t=s.slice();return t[2]=e[l],t}function V(s,e,l){const t=s.slice();return t[5]=e[l],t}function q(s){let e,l;return e=new te({props:{class:"p-4",$$slots:{default:[se]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,n){E(e,t,n),l=!0},p(t,n){const c={};n&257&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function G(s){let e,l=F(s[5]._Course)+"",t,n,c=s[5]._Name+"",r;return{c(){e=L("li"),t=$(l),n=$(": "),r=$(c)},l(a){e=N(a,"LI",{});var o=I(e);t=g(o,l),n=g(o,": "),r=g(o,c),o.forEach(u)},m(a,o){_(a,e,o),h(e,t),h(e,n),h(e,r)},p(a,o){o&1&&l!==(l=F(a[5]._Course)+"")&&k(t,l),o&1&&c!==(c=a[5]._Name+"")&&k(r,c)},d(a){a&&u(e)}}}function oe(s){var c;let e,l,t=v(((c=s[2].Periods.Period)==null?void 0:c.filter(W))??[]),n=[];for(let r=0;r<t.length;r+=1)n[r]=G(V(s,t,r));return{c(){e=L("ol");for(let r=0;r<n.length;r+=1)n[r].c();l=b()},l(r){e=N(r,"OL",{});var a=I(e);for(let o=0;o<n.length;o+=1)n[o].l(a);a.forEach(u),l=P(r)},m(r,a){_(r,e,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);_(r,l,a)},p(r,a){var o;if(a&1){t=v(((o=r[2].Periods.Period)==null?void 0:o.filter(W))??[]);let i;for(i=0;i<t.length;i+=1){const f=V(r,t,i);n[i]?n[i].p(f,a):(n[i]=G(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(r){r&&(u(e),u(l)),y(n,r)}}}function O(s){let e,l;return e=new re({props:{color:U(p(s[2].Periods.Period??[])??"unknown"),large:!0,$$slots:{default:[le]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,n){E(e,t,n),l=!0},p(t,n){const c={};n&1&&(c.color=U(p(t[2].Periods.Period??[])??"unknown")),n&257&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function le(s){let e=p(s[2].Periods.Period??[])+"",l;return{c(){l=$(e)},l(t){l=g(t,e)},m(t,n){_(t,l,n)},p(t,n){n&1&&e!==(e=p(t[2].Periods.Period??[])+"")&&k(l,e)},d(t){t&&u(l)}}}function ae(s){let e,l=j.format(new Date(s[2]._AbsenceDate))+"",t,n,c=p(s[2].Periods.Period??[]),r,a,o=c&&O(s);return{c(){e=L("div"),t=$(l),n=b(),o&&o.c(),r=b(),this.h()},l(i){e=N(i,"DIV",{slot:!0});var f=I(e);t=g(f,l),n=P(f),o&&o.l(f),r=P(f),f.forEach(u),this.h()},h(){J(e,"slot","header")},m(i,f){_(i,e,f),h(e,t),h(e,n),o&&o.m(e,null),h(e,r),a=!0},p(i,f){(!a||f&1)&&l!==(l=j.format(new Date(i[2]._AbsenceDate))+"")&&k(t,l),f&1&&(c=p(i[2].Periods.Period??[])),c?o?(o.p(i,f),f&1&&m(o,1)):(o=O(i),o.c(),m(o,1),o.m(e,r)):o&&(S(),d(o,1,1,()=>{o=null}),B())},i(i){a||(m(o),a=!0)},o(i){d(o),a=!1},d(i){i&&u(e),o&&o.d()}}}function R(s){let e,l;return e=new ne({props:{class:"dark:",$$slots:{header:[ae],default:[oe]},$$scope:{ctx:s}}}),{c(){w(e.$$.fragment)},l(t){D(e.$$.fragment,t)},m(t,n){E(e,t,n),l=!0},p(t,n){const c={};n&257&&(c.$$scope={dirty:n,ctx:t}),e.$set(c)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function se(s){let e,l,t=v(s[0].Absences.Absence??[]),n=[];for(let r=0;r<t.length;r+=1)n[r]=R(M(s,t,r));const c=r=>d(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=A()},l(r){for(let a=0;a<n.length;a+=1)n[a].l(r);e=A()},m(r,a){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,a);_(r,e,a),l=!0},p(r,a){if(a&1){t=v(r[0].Absences.Absence??[]);let o;for(o=0;o<t.length;o+=1){const i=M(r,t,o);n[o]?(n[o].p(i,a),m(n[o],1)):(n[o]=R(i),n[o].c(),m(n[o],1),n[o].m(e.parentNode,e))}for(S(),o=t.length;o<n.length;o+=1)c(o);B()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)m(n[a]);l=!0}},o(r){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)d(n[a]);l=!1},d(r){r&&u(e),y(n,r)}}}function ce(s){let e,l,t,n,c;l=new Z({props:{show:!s[1],loadingMsg:"Loading attendance..."}});let r=s[0]&&q(s);return{c(){e=b(),w(l.$$.fragment),t=b(),r&&r.c(),n=A(),this.h()},l(a){H("svelte-1j798or",document.head).forEach(u),e=P(a),D(l.$$.fragment,a),t=P(a),r&&r.l(a),n=A(),this.h()},h(){document.title="Attendance - GradeVue"},m(a,o){_(a,e,o),E(l,a,o),_(a,t,o),r&&r.m(a,o),_(a,n,o),c=!0},p(a,[o]){const i={};o&2&&(i.show=!a[1]),l.$set(i),a[0]?r?(r.p(a,o),o&1&&m(r,1)):(r=q(a),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(S(),d(r,1,1,()=>{r=null}),B())},i(a){c||(m(l.$$.fragment,a),m(r),c=!0)},o(a){d(l.$$.fragment,a),d(r),c=!1},d(a){a&&(u(e),u(t),u(n)),C(l,a),r&&r.d(a)}}}function p(s){const e=s.map(l=>l._Name);return e.some(l=>l==="Absent"||l==="Non ADA")?"Absent":e.some(l=>l.match(/Tardy/))?"Tardy":e.some(l=>l.match(/Field Trip|School Pass|Excused|Medical\/Dent|Comp Ed\/Court-Religi|Illness or Sickness|SB14 Wellness\/Illnes/))?"Excused":e.some(l=>l==="Present")?"Present":"Unknown"}function U(s){switch(s){case"Absent":return"red";case"Tardy":return"yellow";case"Excused":case"Present":return"green";default:return"primary"}}const W=s=>s._Name;function ie(s,e,l){let t,n;return T(s,x,c=>l(0,t=c)),T(s,ee,c=>l(1,n=c)),!t&&Y&&X(),[t,n]}class ge extends K{constructor(e){super(),Q(this,e,ie,ce,z,{})}}export{ge as component};
